import{a as E}from"./chunk-A5FDEGXE.js";import{a as T}from"./chunk-C7K2NY2G.js";import{a as x,b as s,c as v,d as S,g as y,h as w,i as z,n as F,o as I,p as k}from"./chunk-6FGELC55.js";import{b as M,d as O}from"./chunk-R254MLMK.js";import"./chunk-O6PKEHSA.js";import"./chunk-BYXBJQAS.js";import{Ba as _,Fa as g,La as l,Na as i,Oa as o,Pa as f,Ta as b,Ya as a,ta as m,wb as h,xa as d,yb as P}from"./chunk-QVS6JBII.js";function N(r,t){r&1&&(i(0,"div",20),a(1," El nombre es requerido "),o())}function R(r,t){r&1&&(i(0,"div",20),a(1," Email v\xE1lido es requerido "),o())}function j(r,t){r&1&&(i(0,"div",20),a(1," Tel\xE9fono es requerido "),o())}function D(r,t){r&1&&(i(0,"div",20),a(1," Direcci\xF3n es requerida "),o())}function V(r,t){r&1&&(i(0,"span"),a(1,"Continuar"),o())}function G(r,t){r&1&&(i(0,"span"),a(1,"Procesando..."),o())}var q=class r{constructor(t,e,n,c,p){this.fb=t;this.citaService=e;this.clienteService=n;this.router=c;this.route=p;this.informacionForm=this.fb.group({nombre:["",s.required],email:["",[s.required,s.email]],telefono:["",s.required],direccion:["",s.required],fecha:[""],hora:[""]})}informacionForm;isSubmitting=!1;marcaSeleccionada="";productoSeleccionado="";modeloSeleccionado="";sintomasSeleccionados="";ubicacionSeleccionada="";ngOnInit(){this.route.queryParams.subscribe(e=>{this.marcaSeleccionada=e.marca||"",this.productoSeleccionado=e.producto||"",this.modeloSeleccionado=e.modelo||"",this.sintomasSeleccionados=e.sintomas||"",this.ubicacionSeleccionada=e.ubicacion||"",this.informacionForm.patchValue({nombre:e.nombre||"",email:e.email||"",telefono:e.telefono||"",direccion:e.direccion||"",fecha:e.fecha||"",hora:e.hora||""})});let t=localStorage.getItem("clienteLogueado");if(t)this.clienteService.getClientes().subscribe(e=>{let n=e.find(c=>c.id===t);n&&this.informacionForm.patchValue({nombre:n.nombre,email:n.email,telefono:n.telefono,direccion:n.direccion})});else{let e=localStorage.getItem("emailLogin");e&&this.informacionForm.patchValue({email:e})}}onSubmit(){if(this.informacionForm.valid){this.isSubmitting=!0;let t=this.informacionForm.value,e=this.route.snapshot.queryParams,n=localStorage.getItem("clienteLogueado"),c=()=>{this.router.navigate(["/resumen-cita"],{queryParams:{marca:this.marcaSeleccionada,producto:this.productoSeleccionado,modelo:this.modeloSeleccionado,sintomas:this.sintomasSeleccionados,ubicacion:this.ubicacionSeleccionada,fecha:t.fecha,hora:t.hora,nombre:t.nombre,email:t.email,telefono:t.telefono,direccion:t.direccion,tecnicoId:e.tecnicoId||"",servicioId:e.servicioId||""}})};n?this.clienteService.actualizarCliente(n,{nombre:t.nombre,email:t.email,telefono:t.telefono,direccion:t.direccion}).subscribe({next:()=>c(),error:()=>c()}):c()}}regresar(){console.log("Regresando a t\xE9cnicos..."),console.log("Marca seleccionada:",this.marcaSeleccionada),console.log("Producto seleccionado:",this.productoSeleccionado),this.router.navigate(["/tecnicos"],{queryParams:{servicio:this.route.snapshot.queryParams.servicio||"1",marca:this.marcaSeleccionada,producto:this.productoSeleccionado,modelo:this.modeloSeleccionado,sintomas:this.sintomasSeleccionados,ubicacion:this.ubicacionSeleccionada,fecha:this.informacionForm.get("fecha")?.value||"",hora:this.informacionForm.get("hora")?.value||""}})}static \u0275fac=function(e){return new(e||r)(d(F),d(E),d(T),d(O),d(M))};static \u0275cmp=_({type:r,selectors:[["app-clientes"]],decls:37,vars:8,consts:[[1,"container"],[1,"agendar-header"],[1,"agendar-content"],[1,"agendar-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Tu nombre completo"],["class","error",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono","placeholder","555-0101"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Tu direcci\xF3n"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Informaci\xF3n Personal"),o(),i(4,"p"),a(5,"Completa tus datos para continuar con el servicio"),o()(),i(6,"div",2)(7,"form",3),b("ngSubmit",function(){return n.onSubmit()}),i(8,"div",4)(9,"div",5)(10,"div",6)(11,"label",7),a(12,"Nombre Completo *"),o(),f(13,"input",8),g(14,N,2,0,"div",9),o(),i(15,"div",6)(16,"label",10),a(17,"Email *"),o(),f(18,"input",11),g(19,R,2,0,"div",9),o()(),i(20,"div",5)(21,"div",6)(22,"label",12),a(23,"Tel\xE9fono *"),o(),f(24,"input",13),g(25,j,2,0,"div",9),o(),i(26,"div",6)(27,"label",14),a(28,"Direcci\xF3n *"),o(),f(29,"input",15),g(30,D,2,0,"div",9),o()()(),i(31,"div",16)(32,"button",17),b("click",function(){return n.regresar()}),a(33," Regresar "),o(),i(34,"button",18),g(35,V,2,0,"span",19)(36,G,2,0,"span",19),o()()()()()),e&2){let c,p,u,C;m(7),l("formGroup",n.informacionForm),m(7),l("ngIf",((c=n.informacionForm.get("nombre"))==null?null:c.invalid)&&((c=n.informacionForm.get("nombre"))==null?null:c.touched)),m(5),l("ngIf",((p=n.informacionForm.get("email"))==null?null:p.invalid)&&((p=n.informacionForm.get("email"))==null?null:p.touched)),m(6),l("ngIf",((u=n.informacionForm.get("telefono"))==null?null:u.invalid)&&((u=n.informacionForm.get("telefono"))==null?null:u.touched)),m(5),l("ngIf",((C=n.informacionForm.get("direccion"))==null?null:C.invalid)&&((C=n.informacionForm.get("direccion"))==null?null:C.touched)),m(4),l("disabled",n.informacionForm.invalid||n.isSubmitting),m(),l("ngIf",!n.isSubmitting),m(),l("ngIf",n.isSubmitting)}},dependencies:[P,h,I,y,x,v,S,k,w,z],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.agendar-header[_ngcontent-%COMP%]{text-align:center;padding:2rem 0}.agendar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#e0e0e0;margin-bottom:1rem;text-shadow:0 2px 4px rgba(0,0,0,.3)}.agendar-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#b0b0b0;max-width:600px;margin:0 auto}.agendar-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.agendar-form[_ngcontent-%COMP%]{background:#1f2937cc;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #0000004d;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.form-section[_ngcontent-%COMP%]{margin-bottom:2.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;color:#e0e0e0;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid rgba(102,126,234,.3)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#e0e0e0;font-weight:500;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #374151;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#1f2937cc;color:#e0e0e0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea33;background:#1f2937e6}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.error[_ngcontent-%COMP%]{color:#f87171;font-size:.875rem;margin-top:.25rem}.tecnicos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1rem}.tecnico-card[_ngcontent-%COMP%]{background:#0003;border:2px solid transparent;border-radius:12px;padding:1rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:1rem}.tecnico-card[_ngcontent-%COMP%]:hover{border-color:#667eea4d;background:#667eea1a;transform:translateY(-2px)}.tecnico-card.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#667eea33;box-shadow:0 4px 15px #667eea4d}.tecnico-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:700;color:#fff;flex-shrink:0}.tecnico-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;color:#e0e0e0;margin-bottom:.25rem;font-weight:600}.tecnico-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af;font-size:.85rem;margin-bottom:.25rem}.tecnico-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}.stars[_ngcontent-%COMP%]{color:#fbbf24;font-size:.8rem}.rating[_ngcontent-%COMP%]{color:#e0e0e0;font-weight:600;font-size:.8rem}.experiencia[_ngcontent-%COMP%]{color:#9ca3af;font-size:.8rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block;font-weight:500;min-width:120px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#5a6fd8,#6a4190);transform:translateY(-2px);box-shadow:0 6px 20px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a5568,#2d3748);color:#fff;box-shadow:0 4px 15px #4a55684d}.btn-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3a4557,#1a202c);transform:translateY(-2px);box-shadow:0 6px 20px #4a556866}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.readonly-input[_ngcontent-%COMP%], .readonly-textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid rgba(255,255,255,.1);border-radius:12px;background:#1f293766;color:#b0b0b0;font-size:1rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);cursor:not-allowed;opacity:.8}.readonly-textarea[_ngcontent-%COMP%]{resize:none;min-height:80px;font-family:inherit}.readonly-input[_ngcontent-%COMP%]:focus, .readonly-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff3}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:0 15px}.agendar-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem 0}.agendar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.agendar-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.agendar-form[_ngcontent-%COMP%]{padding:1.5rem}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.6rem;font-size:.95rem}.tecnicos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.8rem}.tecnico-card[_ngcontent-%COMP%]{padding:.8rem}.tecnico-avatar[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.tecnico-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem}.tecnico-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem}.btn[_ngcontent-%COMP%]{width:100%;padding:.6rem 1.5rem;font-size:.95rem}}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:0 10px}.agendar-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem 0}.agendar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem}.agendar-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.agendar-form[_ngcontent-%COMP%]{padding:1rem}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.8rem}.form-group[_ngcontent-%COMP%]{margin-bottom:.8rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.5rem;font-size:.9rem}.tecnicos-grid[_ngcontent-%COMP%]{gap:.6rem}.tecnico-card[_ngcontent-%COMP%]{padding:.6rem}.tecnico-avatar[_ngcontent-%COMP%]{width:35px;height:35px;font-size:.9rem}.tecnico-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.85rem}.tecnico-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem}}']})};export{q as ClientesComponent};
