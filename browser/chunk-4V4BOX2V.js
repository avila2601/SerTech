import{a as z}from"./chunk-C7K2NY2G.js";import{a as y,c as L,d as P,e as k,f as I,g as E,m as O,o as N}from"./chunk-6FGELC55.js";import{d as w}from"./chunk-R254MLMK.js";import{Ba as f,Fa as u,La as b,Na as i,Oa as n,Ta as l,Ua as _,Ya as s,Za as v,ab as C,bb as h,cb as x,da as d,sa as p,ta as c,wb as M,xa as g,yb as S}from"./chunk-QVS6JBII.js";function T(r,a){if(r&1&&(i(0,"div",8),s(1),n()),r&2){let e=_();c(),v(e.errorMsg)}}var R=class r{constructor(a,e){this.router=a;this.clienteService=e}email="";close=new d;errorMsg="";onEscapePress(){this.cerrar()}ingresar(){if(!this.email){this.errorMsg="Por favor, ingresa tu e-mail.";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)){this.errorMsg="Por favor, ingresa un e-mail v\xE1lido.";return}this.clienteService.getClientes().subscribe(e=>{let t=e.find(o=>o.email===this.email);t?(localStorage.setItem("clienteLogueado",t.id),localStorage.removeItem("emailLogin")):(localStorage.setItem("emailLogin",this.email),localStorage.removeItem("clienteLogueado")),this.errorMsg="",this.cerrar(),this.router.navigate(["/"])})}cerrar(){this.close.emit()}static \u0275fac=function(e){return new(e||r)(g(w),g(z))};static \u0275cmp=f({type:r,selectors:[["app-login"]],hostBindings:function(e,t){e&1&&l("keydown.escape",function(){return t.onEscapePress()},!1,p)},outputs:{close:"close"},decls:12,vars:2,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-ingreso",3,"click"],["autocomplete","off",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","name","email","type","email","required","","autocomplete","off",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","btn-ingresar"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(e,t){e&1&&(i(0,"div",0),l("click",function(){return t.cerrar()}),n(),i(1,"div",1),l("click",function(m){return m.stopPropagation()}),i(2,"h2"),s(3,"Iniciar Sesi\xF3n"),n(),i(4,"form",2),l("ngSubmit",function(){return t.ingresar()}),i(5,"div",3)(6,"label",4),s(7,"Ingresa tu e-mail"),n(),i(8,"input",5),x("ngModelChange",function(m){return h(t.email,m)||(t.email=m),m}),n()(),i(9,"button",6),s(10,"Ingresar"),n()(),u(11,T,2,1,"div",7),n()),e&2&&(c(8),C("ngModel",t.email),c(3),b("ngIf",t.errorMsg))},dependencies:[S,M,N,E,y,L,P,O,I,k],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1000}.modal-ingreso[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#232946;color:#fff;border-radius:16px;padding:2rem 2.5rem 1.5rem;min-width:340px;max-width:95vw;z-index:1001;box-shadow:0 8px 32px #0006;max-height:80vh;overflow-y:auto;display:flex;flex-direction:column;align-items:center}h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#a5b4fc;font-size:1.3rem;font-weight:700;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem;width:100%;display:flex;flex-direction:column;align-items:flex-start}label[_ngcontent-%COMP%]{color:#b0b0b0;font-size:1rem;margin-bottom:.3rem;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:.7rem 1rem;border-radius:8px;border:1px solid #374151;background:#111827cc;color:#e0e0e0;font-size:1rem;margin-bottom:.2rem;transition:border .2s}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#111827e6}.btn-ingresar[_ngcontent-%COMP%]{width:100%;margin-top:.5rem;padding:.7rem 0;font-size:1.08rem;border-radius:8px;font-weight:600}.error-msg[_ngcontent-%COMP%]{color:#ff6b6b;margin-top:.7rem;text-align:center;font-weight:500;font-size:1rem}"]})};export{R as a};
